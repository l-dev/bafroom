(this["webpackJsonpbafroom-app"]=this["webpackJsonpbafroom-app"]||[]).push([[0],{115:function(e,t,n){e.exports=n(293)},292:function(e,t,n){},293:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(22),i=n.n(r),c=n(18),l=n(7),s=n(8),u=n(10),h=n(9),m=n(11),p=n(17),d=(n(134),n(30)),f=n(25),v=n.n(f),g=(n(41),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).getRestaurantsFromApi=function(e){n.setState({loading:!0}),v.a.get("https://cors-anywhere.herokuapp.com/".concat("https://api.yelp.com/v3/businesses/search?location=",e),{headers:{Authorization:"Bearer ".concat("2zvBHiw4TzhtjTGrfDDGkiUo-phsx8lvB2R_wo-ftZcFm0lbj_BFZ6naQzfVDVCfoGmrF2IXSWOZ-NK0VruT9e8RvU7hAnfi-ANF6Sv2GwCcXUoM2QKJCOpsIt3NXXYx"),"Access-Control-Allow-Origin":!0}}).then((function(e){console.log(e.data.businesses),n.setState({results:e.data.businesses,loading:!1})})).catch((function(e){n.setState({errorState:"Sorry couldn't find any locations",loading:!1})}))},n.state={results:[],loading:!1},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getRestaurantsFromApi("San Diego")}},{key:"componentDidUpdate",value:function(e,t){var n=this;this.props.searchLocationQuery!==e.searchLocationQuery&&this.setState({results:[]},(function(){return n.getRestaurantsFromApi(n.props.searchLocationQuery)}))}},{key:"render",value:function(){var e=this.state.results.map((function(e){var t="/detail/".concat(e.id);return o.a.createElement("div",null,o.a.createElement("h2",null,o.a.createElement(d.b,{to:t},e.name)),o.a.createElement("p",null,e.location.address1,", ",e.location.city))}));return o.a.createElement("div",null,e)}}]),t}(a.Component)),b={position:"absolute",width:"70%",height:"100%"},E=function(e){function t(e){var n;Object(l.a)(this,t);var a=(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).props.initialCenter,o=a.lat,r=a.lng;return n.state={currentLocation:{lat:o,lng:r}},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.google!==this.props.google&&this.loadMap(),t.currentLocation!==this.state.currentLocation&&this.recenterMap()}},{key:"recenterMap",value:function(){var e=this.map,t=this.state.currentLocation,n=this.props.google.maps;if(e){var a=new n.LatLng(t.lat,t.lng);e.panTo(a)}}},{key:"componentDidMount",value:function(){var e=this;this.props.centerAroundCurrentLocation&&navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){var n=t.coords;e.setState({currentLocation:{lat:n.latitude,lng:n.longitude}})})),this.loadMap()}},{key:"loadMap",value:function(){if(this.props&&this.props.google){var e=this.props.google.maps,t=this.refs.map,n=i.a.findDOMNode(t),a=this.props.zoom,o=this.state.currentLocation,r=o.lat,c=o.lng,l=new e.LatLng(r,c),s=Object.assign({},{center:l,zoom:a});this.map=new e.Map(n,s)}}},{key:"renderChildren",value:function(){var e=this,t=this.props.children;if(t)return o.a.Children.map(t,(function(t){if(t)return o.a.cloneElement(t,{map:e.map,google:e.props.google,mapCenter:e.state.currentLocation})}))}},{key:"render",value:function(){var e=Object.assign({},b);return o.a.createElement("div",null,o.a.createElement("div",{style:e,ref:"map"},"Loading Map..."),this.renderChildren(),o.a.createElement("div",{className:"column"},o.a.createElement(g,null)))}}]),t}(o.a.Component),w=E;E.defaultProps={zoom:12,initialCenter:{lat:44.068203,lng:-114.742043},centerAroundCurrentLocation:!1,visible:!0};var k=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={showingInfoWindow:!1,activeMarker:{},selectedPlace:{},coordinates:[]},n.onMarkerClick=function(e,t,a){return n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0,coordinates:a.data.businesses})},n.onClose=function(e){n.state.showingInfoWindow&&n.setState({showingInfoWindow:!1,activeMarker:null})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return console.log(this.state),o.a.createElement("div",null,o.a.createElement("h1",null,"Map"),o.a.createElement(g,{markers:this.state.result.coordinates}),o.a.createElement(w,{centerAroundCurrentLocation:!0,google:this.props.google},o.a.createElement(p.Marker,{onClick:this.onMarkerClick,name:"Current Location"}),o.a.createElement(p.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,onClose:this.onClose},o.a.createElement("div",null,o.a.createElement("h4",null,this.state.selectedPlace.name)))))}}]),t}(a.Component),O=Object(p.GoogleApiWrapper)({apiKey:"AIzaSyBD28JRPlL5AT3GqY_IID3ZeYdLUNnWGqA"})(k),C=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("img",{className:"home",src:"http://instagshop.info/wp-content/uploads/2018/12/bathroom-icon-bathroom-icon-bathroom-icon-bathroom-icon-symbol-nu-print-this-out-put-bathroom-icon-bathroom-icon-bathroom-man-icon-vector.jpg"}),o.a.createElement("footer",null,"Powered by Yelp API & Google Maps API"))}}]),t}(a.Component),y=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).onMarkerClick=function(e,t,a){return n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},n.onClose=function(e){n.state.showingInfoWindow&&n.setState({showingInfoWindow:!1,activeMarker:null})},n.state={showingInfoWindow:!1,activeMarker:{},selectedPlace:{},results:[],loading:!1,locationSearched:"San Diego"},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),v.a.get("https://cors-anywhere.herokuapp.com/".concat("https://api.yelp.com/v3/businesses/search?location=",this.state.locationSearched),{headers:{Authorization:"Bearer ".concat("2zvBHiw4TzhtjTGrfDDGkiUo-phsx8lvB2R_wo-ftZcFm0lbj_BFZ6naQzfVDVCfoGmrF2IXSWOZ-NK0VruT9e8RvU7hAnfi-ANF6Sv2GwCcXUoM2QKJCOpsIt3NXXYx"),"Access-Control-Allow-Origin":!0}}).then((function(t){console.log(t.data.businesses),e.setState({results:t.data.businesses})})).catch((function(t){e.setState({errorState:"Sorry couldn't find any locations",loading:!1})}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(w,{centerAroundCurrentLocation:!0,google:this.props.google},this.state.results.map((function(t,n){return o.a.createElement(p.Marker,{onClick:e.onMarkerClick,key:n,name:t.name,position:{lat:t.coordinates.latitude,lng:t.coordinates.longitude}})})),o.a.createElement(p.Marker,{onClick:this.onMarkerClick,name:"Current Location"}),o.a.createElement(p.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,onClose:this.onClose},o.a.createElement("div",null,o.a.createElement("h4",null,o.a.createElement("a",{href:"/list",name:this.state.selectedPlace.name},this.state.selectedPlace.name)," ")))))}}]),t}(a.Component),j=Object(p.GoogleApiWrapper)({apiKey:"AIzaSyBD28JRPlL5AT3GqY_IID3ZeYdLUNnWGqA"})(y),S=n(31),A=n(114),M=n.n(A),I=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(){v.a.post("http://localhost:3000/new/newreview/",{reviews:n.state.reviews}).then((function(e){n.setState({reviews:e.data})})).catch((function(e){console.log(e)}))},n.grabReviews=function(){fetch("http://localhost:3000/new/newreview/").then((function(e){return e.json()})).then((function(e){return e.map((function(e){n.setState({reviews:e.reviews})}))}))},n.componentDidMount=function(){console.log("in component"),fetch("https://cors-anywhere.herokuapp.com/".concat("https://api.yelp.com/v3/businesses/",n.state.name),{headers:{Authorization:"Bearer ".concat("2zvBHiw4TzhtjTGrfDDGkiUo-phsx8lvB2R_wo-ftZcFm0lbj_BFZ6naQzfVDVCfoGmrF2IXSWOZ-NK0VruT9e8RvU7hAnfi-ANF6Sv2GwCcXUoM2QKJCOpsIt3NXXYx"),"Access-Control-Allow-Origin":!0}}).then((function(e){return e.json()})).then((function(e){n.setState({name:e.name,location:e.location.display_address,url:e.url})}))},n.handleSubmit=n.handleSubmit.bind(Object(S.a)(n)),n.handleChange=n.handleChange.bind(Object(S.a)(n)),n.state={name:n.props.match.params.id,reviews:[],rating:5},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"changeRating",value:function(e,t){this.setState({rating:e})}},{key:"handleSubmit",value:function(e){e.preventDefault();this.state}},{key:"handleChange",value:function(e){this.setState({reviews:e.target.value})}},{key:"render",value:function(){var e=this;return this.grabReviews(),o.a.createElement("div",null,o.a.createElement("h1",null,this.state.name),o.a.createElement("p",null,this.state.location," "),o.a.createElement("p",{className:"url"},"Check them out on yelp - "),o.a.createElement("a",{href:"{this.state.url}",className:"url"},this.state.url),o.a.createElement("div",{className:"field"},o.a.createElement("h1",null,"LEAVE A BATHROOM REVIEW"),o.a.createElement("h2",null,"BATHROOM REVIEWS"),o.a.createElement("p",null,this.state.reviews),o.a.createElement("form",{onSubmit:function(){return e.handleSubmit()}},o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("label",{className:"review"},"Bathroom Review: ",o.a.createElement("br",null),o.a.createElement("textarea",{type:"text",value:this.state.reviews,onChange:this.handleChange,name:"Review"})),o.a.createElement("br",null),o.a.createElement(M.a,{rating:this.state.rating,renderStarIcon:function(){return o.a.createElement("span",null,"k",o.a.createElement("img",{src:"https://cdn4.iconfinder.com/data/icons/hotel-1-1/48/8-512.png"}))},changeRating:this.changeRating,numberOfStars:6,name:"rating"}),o.a.createElement("br",null),o.a.createElement("input",{type:"submit",value:"Submit"}))))}}]),t}(a.Component);n(292);var L=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("h1",null,o.a.createElement("a",{href:"/"},"BATHROOM LOCATOR"))),o.a.createElement("nav",null,o.a.createElement("a",{href:"/test"},"MAP"),o.a.createElement("a",{href:"/"},"HOME")),o.a.createElement("div",{className:"main"},o.a.createElement(c.c,null,o.a.createElement(c.a,{path:"/test",component:j}),o.a.createElement(c.a,{exact:!0,path:"/maps",component:O}),o.a.createElement(c.a,{exact:!0,path:"/list",component:g}),o.a.createElement(c.a,{exact:!0,path:"/",component:C}),o.a.createElement(c.a,{path:"/detail/:id",component:I}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(d.a,null,o.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},41:function(e,t,n){}},[[115,1,2]]]);
//# sourceMappingURL=main.1eb46b73.chunk.js.map